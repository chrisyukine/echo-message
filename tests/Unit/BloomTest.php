<?php

namespace Tests\Unit;

use Tests\TestCase;
use App\Common\Tools\Bloom\BloomRedis;
use voku\helper\HtmlDomParser;

class BloomTest extends TestCase
{
    private int $runCount = 0;
    private int $success  = 0;
    private int $mayErr   = 0;

    public function testMakeRedis()
    {
        $redis = Redis();
        dd($redis->set('test', 'test'));
    }

    const CHECk_STR = '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';

    /**
     * 内存占用测试.
     */
    public function testBloomMemory()
    {
        $start = 25;
        for ($i = $start; $i < 120; ++$i) {
            $this->testCheckBloom($i, $start);
        }
    }

    /**
     * 测试新增数据.
     *
     * @return void
     */
    private function testCheckBloom($i = 1, $start = 0)
    {
        $cls      = new BloomRedis();
        $cls->setBucket('test_bloom_plus');
        $sysOutText = '';
        while ($match = substr(self::CHECk_STR, $this->runCount, $i)) {
            //输出控制台文案
            $sysOutText = sprintf('round=%d success=%d mayErr=%d total=%d', $i - $start + 1, $this->success, $this->mayErr, $this->runCount);

            //是否存在
            $exists = $cls->exists($match);

            //不存在情况
            !$exists                      &&
            $cls->add($match)             &&
            system_out_print($sysOutText) &&
            $this->success++;

            //存在情况，更新统计
            $exists && $this->mayErr++;

            //更新累计统计
            ++$this->runCount;
        }
        system_out_print($sysOutText);
    }
}
